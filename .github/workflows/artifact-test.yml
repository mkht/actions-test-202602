name: Artifact-Test

on:
  schedule:
    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  artifact_matrix:
    name: matrix (${{ matrix.char }})
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        char:
          - "日"
          - "理"
          - "同"
          - "管"
          - "漢"
          - "字"
          - "語"
          - "本"
          - "学"
          - "校"
          - "電"
          - "車"
          - "水"
          - "火"
          - "木"
          - "金"
          - "土"
          - "山"
          - "川"
          - "空"

    steps:
      - name: Create source file
        run: |
          mkdir -p source
          printf 'artifact-content-%s\n' "$(date -u +%Y%m%dT%H%M%SZ)" > source/test.txt

      - name: Upload artifact (Non-ASCII)
        uses: actions/upload-artifact@v4
        with:
          name: probe-${{ matrix.char }}-x
          path: source/test.txt
          if-no-files-found: error

      - name: Download artifact (Non-ASCII)
        uses: actions/download-artifact@v4
        with:
          name: probe-${{ matrix.char }}-x
          path: downloaded
