name: Artifact-Test

on:
  workflow_dispatch:

jobs:
  artifact_matrix:
    name: matrix (${{ matrix.char }})
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        char:
          # around 同 (U+540C)
          - "\u5409"
          - "\u540A"
          - "\u540B"
          - "\u540C"
          - "\u540D"
          - "\u540E"
          - "\u540F"
          # around 土 (U+571F)
          - "\u571C"
          - "\u571D"
          - "\u571E"
          - "\u571F"
          - "\u5720"
          - "\u5721"
          - "\u5722"
          # around 理 (U+7406)
          - "\u7403"
          - "\u7404"
          - "\u7405"
          - "\u7406"
          - "\u7407"
          - "\u7408"
          - "\u7409"

    steps:
      - name: Create source file
        run: |
          mkdir -p source
          printf 'artifact-content-%s\n' "$(date -u +%Y%m%dT%H%M%SZ)" > source/test.txt

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: probe-${{ matrix.char }}-x
          path: source/test.txt
          if-no-files-found: error

      - name: Download artifact
        uses: actions/download-artifact@v4
        with:
          name: probe-${{ matrix.char }}-x
          path: downloaded
