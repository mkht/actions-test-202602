name: Artifact-Test

on:
  workflow_dispatch:

jobs:
  artifact_matrix:
    name: matrix (${{ matrix.char }})
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        char:
          # around 土 (U+571F)
          - "\u5710"
          - "\u5711"
          - "\u5712"
          - "\u5713"
          - "\u5714"
          - "\u5715"
          - "\u5716"
          - "\u5717"
          - "\u5718"
          - "\u5719"
          - "\u571A"
          - "\u571B"
          - "\u571C"
          - "\u571D"
          - "\u571E"
          - "\u571F"
          # around 理 (U+7406)
          - "\u7400"
          - "\u7401"
          - "\u7402"
          - "\u7403"
          - "\u7404"
          - "\u7405"
          - "\u7406"
          - "\u7407"
          - "\u7408"
          - "\u7409"
          - "\u740A"
          - "\u740B"
          - "\u740C"
          - "\u740D"
          - "\u740E"
          - "\u740F"

    steps:
      - name: Create source file
        run: |
          mkdir -p source
          printf 'artifact-content-%s\n' "$(date -u +%Y%m%dT%H%M%SZ)" > source/test.txt

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: probe-${{ matrix.char }}-x
          path: source/test.txt
          if-no-files-found: error

      - name: Download artifact
        uses: actions/download-artifact@v4
        with:
          name: probe-${{ matrix.char }}-x
          path: downloaded
